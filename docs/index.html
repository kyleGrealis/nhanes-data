<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>nhanesdata: Pre-processed NHANES Data with Automated Updates • nhanesdata</title>
<script src="lightswitch.js"></script><script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="nhanesdata: Pre-processed NHANES Data with Automated Updates">
<meta name="description" content="Access harmonized NHANES survey data (1999-2023) with quarterly updates from CDC servers. Provides fast data loading, search functions, and automatic type reconciliation across survey cycles.">
<meta property="og:description" content="Access harmonized NHANES survey data (1999-2023) with quarterly updates from CDC servers. Provides fast data loading, search functions, and automatic type reconciliation across survey cycles.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">nhanesdata</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/getting-started.html">Getting Started with NHANES Data</a></li>
    <li><a class="dropdown-item" href="articles/introduction.html">Introduction to nhanesdata</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/kyleGrealis/nhanesdata" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="nhanesdata">nhanesdata<a class="anchor" aria-label="anchor" href="#nhanesdata"></a>
</h1></div>
<!-- badges: start -->

<p>An R package for accessing NHANES (National Health and Nutrition Examination Survey) data with automated quarterly updates from CDC servers. Automatically harmonizes multi-cycle data, handles type inconsistencies across survey years, and provides pre-processed datasets for fast access.</p>
<div class="section level2">
<h2 id="what-this-package-does">What This Package Does<a class="anchor" aria-label="anchor" href="#what-this-package-does"></a>
</h2>
<p>This package provides:</p>
<ol style="list-style-type: decimal">
<li>
<strong>Public Data Access</strong>: Pre-processed datasets hosted on Cloudflare R2 for fast, reliable downloads</li>
<li>
<strong>Data Harmonization</strong>: Seamlessly combines survey cycles (1999-2021) with automatic type reconciliation</li>
<li>
<strong>Storage Format</strong>: Saves data <code>.parquet</code> (cross-platform) for fast reading and importing</li>
<li>
<strong>Change Detection</strong>: MD5 checksums ensure only updated datasets are uploaded to cloud storage</li>
</ol>
<p>All processed datasets are publicly available at <code>https://nhanes.kylegrealis.com/</code> with no authentication required.</p>
</div>
<div class="section level2">
<h2 id="acknowledgments">Acknowledgments<a class="anchor" aria-label="anchor" href="#acknowledgments"></a>
</h2>
<p>This package builds on the excellent work of the <a href="https://cran.r-project.org/package=nhanesA" class="external-link">nhanesA</a> package developers. We’re grateful for their efforts in making NHANES data accessible through R.</p>
<p>The nhanesdata package extends nhanesA by:<br>
- Automatically harmonizing data across survey cycles<br>
- Providing pre-processed datasets for faster access<br>
- Handling type inconsistencies between cycles<br>
- Offering convenient search and discovery functions</p>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>Install from GitHub:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Using pak (recommended)</span></span>
<span><span class="co"># install.packages("pak")</span></span>
<span><span class="fu">pak</span><span class="fu">::</span><span class="fu"><a href="https://pak.r-lib.org/reference/pak.html" class="external-link">pak</a></span><span class="op">(</span><span class="st">"kyleGrealis/nhanesdata"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Or using remotes</span></span>
<span><span class="co"># install.packages("remotes")</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"kyleGrealis/nhanesdata"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="quick-start">Quick Start<a class="anchor" aria-label="anchor" href="#quick-start"></a>
</h2>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">nhanesdata</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Load NHANES data (all survey cycles pre-merged)</span></span>
<span><span class="co"># Dataset names are case-insensitive!</span></span>
<span><span class="va">demo</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/read_nhanes.html">read_nhanes</a></span><span class="op">(</span><span class="st">'demo'</span><span class="op">)</span>        <span class="co"># Demographics - lowercase</span></span>
<span><span class="va">bpx</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/read_nhanes.html">read_nhanes</a></span><span class="op">(</span><span class="st">'BPX'</span><span class="op">)</span>          <span class="co"># Blood pressure - uppercase</span></span>
<span><span class="va">trigly</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/read_nhanes.html">read_nhanes</a></span><span class="op">(</span><span class="st">'TRIGLY'</span><span class="op">)</span>    <span class="co"># Triglycerides - uppercase</span></span>
<span></span>
<span><span class="co"># Search for variables</span></span>
<span><span class="fu"><a href="reference/term_search.html">term_search</a></span><span class="op">(</span><span class="st">'diabetes'</span><span class="op">)</span>            <span class="co"># Search by keyword</span></span>
<span><span class="fu"><a href="reference/var_search.html">var_search</a></span><span class="op">(</span><span class="st">'LBXGLU'</span><span class="op">)</span>              <span class="co"># Search by variable name</span></span>
<span><span class="fu"><a href="reference/get_url.html">get_url</a></span><span class="op">(</span><span class="st">'DEMO_J'</span><span class="op">)</span>                 <span class="co"># Get CDC documentation</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="user-functions">User Functions<a class="anchor" aria-label="anchor" href="#user-functions"></a>
</h2>
<p><strong>All functions are case-insensitive</strong> - use ‘demo’, ‘DEMO’, or ‘Demo’ interchangeably!</p>
<table class="table">
<thead><tr>
<th>Function</th>
<th>Purpose</th>
</tr></thead>
<tbody>
<tr>
<td><code>read_nhanes(dataset)</code></td>
<td>Load NHANES data (all cycles pre-merged)</td>
</tr>
<tr>
<td><code>term_search(var)</code></td>
<td>Search variables by keyword or phrase</td>
</tr>
<tr>
<td><code>var_search(var)</code></td>
<td>Search variables by exact name</td>
</tr>
<tr>
<td><code>get_url(table)</code></td>
<td>Get CDC documentation URL for a dataset</td>
</tr>
</tbody>
</table>
<p>Data is updated quarterly via automated workflows. See the workflow badge at the top for latest update status.</p>
<blockquote>
<p><strong>Note on Data Harmonization:</strong> This package reconciles data types (integers and floats are now consistent) across NHANES cycles, but variable names remain unchanged from the original CDC data. Users should verify the CDC/NHANES documentation to understand how variable names and usage may have changed from cycle to cycle.</p>
</blockquote>
</div>
<div class="section level2">
<h2 id="automated-data-pipeline">Automated Data Pipeline<a class="anchor" aria-label="anchor" href="#automated-data-pipeline"></a>
</h2>
<p>This package includes a <strong>fully automated GitHub Actions workflow</strong> that:</p>
<ol style="list-style-type: decimal">
<li>
<strong>Runs quarterly</strong> (Jan 1, Apr 1, Jul 1, Oct 1 at 2 AM UTC)</li>
<li>
<strong>Pulls fresh data</strong> from CDC servers for all NHANES datasets</li>
<li>
<strong>Detects changes</strong> using MD5 checksums (only uploads modified data)</li>
<li>
<strong>Uploads to R2</strong> (Cloudflare object storage) for public access</li>
<li>
<strong>Commits checksums</strong> to track data versions over time</li>
</ol>
<div class="section level3">
<h3 id="available-datasets">Available Datasets<a class="anchor" aria-label="anchor" href="#available-datasets"></a>
</h3>
<p>The automation processes <strong>Currently includes 66 datasets (with more coming)</strong> across two categories:</p>
<p><strong>Questionnaire/Interview Tables (50):</strong></p>
<ul>
<li>
<code>demo</code> - Demographics</li>
<li>
<code>bpq</code> - Blood Pressure &amp; Cholesterol Questionnaire</li>
<li>
<code>diq</code> - Diabetes</li>
<li>
<code>smq</code> - Smoking</li>
<li>
<code>alq</code> - Alcohol</li>
<li>… and 45 more (see <code>inst/extdata/datasets.yml</code> for full list)</li>
</ul>
<p><strong>Examination Tables (16):</strong></p>
<ul>
<li>
<code>bmx</code> - Body Measures</li>
<li>
<code>bpx</code> - Blood Pressure (Examination)</li>
<li>
<code>cbc</code> - Blood Counts</li>
<li>
<code>trigly</code> - Triglycerides</li>
<li>… and 12 more</li>
</ul>
</div>
</div>
<div class="section level2">
<h2 id="key-functions">Key Functions<a class="anchor" aria-label="anchor" href="#key-functions"></a>
</h2>
<div class="section level3">
<h3 id="data-loading">Data Loading<a class="anchor" aria-label="anchor" href="#data-loading"></a>
</h3>
<p><strong><code>read_nhanes(dataset)</code></strong></p>
<p>Loads pre-processed NHANES data from cloud storage. All dataset names are <strong>case-insensitive</strong>.</p>
<ul>
<li>
<strong>Fast access</strong>: Hosted on cloud storage for worldwide reliability<br>
</li>
<li>
<strong>All cycles pre-merged</strong>: 1999-2023 data automatically combined<br>
</li>
<li>
<strong>No authentication needed</strong>: Public access to all datasets<br>
</li>
<li>
<strong>Case-insensitive</strong>: Use ‘demo’, ‘DEMO’, or ‘Demo’ - all work!<br>
</li>
<li>
<strong>Graceful error handling</strong>: Helpful messages if the API is unavailable</li>
</ul>
<p>Example:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># All case variations work identically:</span></span>
<span><span class="va">trigly</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/read_nhanes.html">read_nhanes</a></span><span class="op">(</span><span class="st">'trigly'</span><span class="op">)</span>    <span class="co"># Lowercase</span></span>
<span><span class="va">demo</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/read_nhanes.html">read_nhanes</a></span><span class="op">(</span><span class="st">'DEMO'</span><span class="op">)</span>        <span class="co"># Uppercase</span></span>
<span><span class="va">acq</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/read_nhanes.html">read_nhanes</a></span><span class="op">(</span><span class="st">'Acq'</span><span class="op">)</span>          <span class="co"># Mixed case</span></span></code></pre></div>
<hr>
</div>
<div class="section level3">
<h3 id="helper-functions">Helper Functions<a class="anchor" aria-label="anchor" href="#helper-functions"></a>
</h3>
<p>All helper functions are <strong>case-insensitive</strong>:</p>
<ul>
<li>
<strong><code>get_url(table)</code></strong>: Returns the CDC codebook URL for a given table<br>
</li>
<li>
<strong><code>term_search(var)</code></strong>: Search for variables by keyword or phrase (wraps <code><a href="https://rdrr.io/pkg/nhanesA/man/nhanesSearch.html" class="external-link">nhanesA::nhanesSearch()</a></code>)<br>
</li>
<li>
<strong><code>var_search(var)</code></strong>: Search for variables by exact name (wraps <code><a href="https://rdrr.io/pkg/nhanesA/man/nhanesSearchVarName.html" class="external-link">nhanesA::nhanesSearchVarName()</a></code>)</li>
</ul>
</div>
</div>
<div class="section level2">
<h2 id="dependencies">Dependencies<a class="anchor" aria-label="anchor" href="#dependencies"></a>
</h2>
<div class="section level3">
<h3 id="core-packages">Core packages:<a class="anchor" aria-label="anchor" href="#core-packages"></a>
</h3>
<ul>
<li>
<strong>tidyverse</strong>: Data manipulation and pipelines<br>
</li>
<li>
<strong>nhanesA</strong>: Interface to NHANES data API<br>
</li>
<li>
<strong>arrow</strong>: Fast parquet file I/O<br>
</li>
<li>
<strong>janitor</strong>: Variable name cleaning<br>
</li>
<li>
<strong>haven</strong> / <strong>foreign</strong>: Reading CDC data formats</li>
</ul>
</div>
<div class="section level3">
<h3 id="optional-packages">Optional packages:<a class="anchor" aria-label="anchor" href="#optional-packages"></a>
</h3>
<ul>
<li>
<strong>pins</strong>: For pushing data to cloud storage (S3-compatible)<br>
</li>
<li>
<strong>survey</strong> / <strong>srvyr</strong>: Complex survey analysis (not used in data acquisition)<br>
</li>
<li>
<strong>gtsummary</strong> / <strong>gt</strong>: Table formatting (for downstream analysis)<br>
</li>
<li>
<strong>tidymodels</strong>: Modeling framework (for downstream analysis)</li>
</ul>
<p>Install dependencies:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="st">"tidyverse"</span>, <span class="st">"nhanesA"</span>, <span class="st">"arrow"</span>, <span class="st">"janitor"</span>, <span class="st">"haven"</span>,</span>
<span>  <span class="st">"foreign"</span>, <span class="st">"broom"</span>, <span class="st">"glue"</span>, <span class="st">"readxl"</span>, <span class="st">"fs"</span></span>
<span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="understanding-nhanes-dataset-names">Understanding NHANES Dataset Names<a class="anchor" aria-label="anchor" href="#understanding-nhanes-dataset-names"></a>
</h2>
<p>This is <strong>critical</strong> to understand before using the package:</p>
<div class="section level3">
<h3 id="how-cdc-names-datasets">How CDC Names Datasets<a class="anchor" aria-label="anchor" href="#how-cdc-names-datasets"></a>
</h3>
<p>The CDC releases NHANES data in 2-year cycles, with each cycle getting a <strong>letter suffix</strong>:</p>
<table class="table">
<thead><tr>
<th>CDC Table Name</th>
<th>Survey Cycle</th>
<th>Years</th>
</tr></thead>
<tbody>
<tr>
<td><code>DEMO</code></td>
<td>1999-2000</td>
<td>No suffix (first cycle)</td>
</tr>
<tr>
<td><code>DEMO_B</code></td>
<td>2001-2002</td>
<td>B</td>
</tr>
<tr>
<td><code>DEMO_C</code></td>
<td>2003-2004</td>
<td>C</td>
</tr>
<tr>
<td><code>DEMO_D</code></td>
<td>2005-2006</td>
<td>D</td>
</tr>
<tr>
<td>…</td>
<td>…</td>
<td>…</td>
</tr>
<tr>
<td><code>DEMO_J</code></td>
<td>2017-2018</td>
<td>J</td>
</tr>
<tr>
<td><code>DEMO_L</code></td>
<td>2021-2022</td>
<td>L (skips K)</td>
</tr>
</tbody>
</table>
<p>This pattern applies to <strong>all 66 datasets</strong>: <code>BPX</code>, <code>BPX_B</code>, <code>BPX_C</code>, …, <code>BPX_L</code> for blood pressure examination data, and so on.</p>
</div>
<div class="section level3">
<h3 id="how-this-package-names-datasets">How This Package Names Datasets<a class="anchor" aria-label="anchor" href="#how-this-package-names-datasets"></a>
</h3>
<p>We <strong>combine all cycles</strong> and store them by <strong>base name only</strong> (no suffixes):</p>
<ul>
<li>CDC has: <code>DEMO</code>, <code>DEMO_B</code>, <code>DEMO_C</code>, …, <code>DEMO_L</code> (11 separate files)<br>
</li>
<li>We store: <code>demo</code> (1 merged file with all cycles)<br>
</li>
<li>A <code>year</code> column automatically tracks which cycle each row came from</li>
</ul>
<p>This means:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># You call this:</span></span>
<span><span class="va">demo</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/read_nhanes.html">read_nhanes</a></span><span class="op">(</span><span class="st">'demo'</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># You get: All 11 cycles merged together</span></span>
<span><span class="co"># - 1999-2000 data (from DEMO)</span></span>
<span><span class="co"># - 2001-2002 data (from DEMO_B)</span></span>
<span><span class="co"># - 2003-2004 data (from DEMO_C)</span></span>
<span><span class="co"># - ... through 2021-2022 (from DEMO_L)</span></span>
<span><span class="co"># - Each row has a 'year' column showing its cycle</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="important-2019-2020-cycle-covid-19">Important: 2019-2020 Cycle (COVID-19)<a class="anchor" aria-label="anchor" href="#important-2019-2020-cycle-covid-19"></a>
</h3>
<p>The 2019-2020 survey cycle (suffix K) is <strong>NOT included</strong> in this package’s datasets.</p>
<p><strong>Why?</strong> The COVID-19 pandemic disrupted data collection, and the CDC determined the data quality was insufficient for standard NHANES analysis. The CDC combined partial 2019-2020 data with 2021-2023 data and released it as a special pre-pandemic dataset.</p>
<p><strong>Reference:</strong> <a href="https://wwwn.cdc.gov/nchs/nhanes/continuousnhanes/default.aspx?BeginYear=2019" class="external-link">CDC NHANES 2019-2020 Data Documentation</a></p>
<p><strong>Impact:</strong> Datasets jump from suffix J (2017-2018) to suffix L (2021-2023), skipping K entirely.</p>
</div>
<div class="section level3">
<h3 id="why-this-matters">Why This Matters<a class="anchor" aria-label="anchor" href="#why-this-matters"></a>
</h3>
<p>When searching CDC documentation, you’ll see table names with suffixes (e.g., <code>DEMO_J</code> for 2017-2018 demographics). But when using this package, you use the <strong>base name</strong> (<code>demo</code>) and get <strong>all cycles automatically merged</strong>.</p>
<p>This design: - Simplifies data access (one name instead of tracking 11 suffix codes) - Enables longitudinal analysis (all years in one dataset) - Handles type mismatches between cycles automatically - Adds temporal context via the <code>year</code> column</p>
</div>
</div>
<div class="section level2">
<h2 id="usage-examples">Usage Examples<a class="anchor" aria-label="anchor" href="#usage-examples"></a>
</h2>
<div class="section level3">
<h3 id="load-multiple-datasets-with-tidyverse-style">Load Multiple Datasets with Tidyverse Style<a class="anchor" aria-label="anchor" href="#load-multiple-datasets-with-tidyverse-style"></a>
</h3>
<p>The recommended approach uses <code><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">purrr::map()</a></code> for clean, functional workflows:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">nhanesdata</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Load multiple datasets - mix uppercase/lowercase as you like!</span></span>
<span><span class="va">datasets</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'demo'</span>, <span class="st">'BPX'</span>, <span class="st">'bmx'</span>, <span class="st">'TRIGLY'</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map</a></span><span class="op">(</span><span class="va">read_nhanes</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://rlang.r-lib.org/reference/set_names.html" class="external-link">set_names</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'demo'</span>, <span class="st">'bpx'</span>, <span class="st">'bmx'</span>, <span class="st">'trigly'</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Access individual datasets</span></span>
<span><span class="va">demographics</span> <span class="op">&lt;-</span> <span class="va">datasets</span><span class="op">$</span><span class="va">demo</span></span>
<span><span class="va">blood_pressure</span> <span class="op">&lt;-</span> <span class="va">datasets</span><span class="op">$</span><span class="va">bpx</span></span>
<span><span class="va">body_measures</span> <span class="op">&lt;-</span> <span class="va">datasets</span><span class="op">$</span><span class="va">bmx</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="basic-single-dataset-loading">Basic Single Dataset Loading<a class="anchor" aria-label="anchor" href="#basic-single-dataset-loading"></a>
</h3>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">nhanesdata</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Load demographics (case-insensitive)</span></span>
<span><span class="va">demo</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/read_nhanes.html">read_nhanes</a></span><span class="op">(</span><span class="st">'demo'</span><span class="op">)</span>        <span class="co"># Lowercase</span></span>
<span><span class="co"># demo &lt;- read_nhanes('DEMO')      # Uppercase - same result!</span></span>
<span></span>
<span><span class="co"># Check the year distribution</span></span>
<span><span class="va">demo</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">count</a></span><span class="op">(</span><span class="va">year</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">year</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="joining-datasets-across-survey-components">Joining Datasets Across Survey Components<a class="anchor" aria-label="anchor" href="#joining-datasets-across-survey-components"></a>
</h3>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">nhanesdata</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Load related datasets (demonstrating case flexibility)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'demo'</span>, <span class="st">'BPX'</span>, <span class="st">'Bmx'</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map</a></span><span class="op">(</span><span class="va">read_nhanes</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://rlang.r-lib.org/reference/set_names.html" class="external-link">set_names</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'demo'</span>, <span class="st">'bpx'</span>, <span class="st">'bmx'</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/list2env.html" class="external-link">list2env</a></span><span class="op">(</span>envir <span class="op">=</span> <span class="va">.GlobalEnv</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Join by participant ID (seqn) and year</span></span>
<span><span class="va">analysis_data</span> <span class="op">&lt;-</span> <span class="va">demo</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">inner_join</a></span><span class="op">(</span><span class="va">bpx</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'seqn'</span>, <span class="st">'year'</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">inner_join</a></span><span class="op">(</span><span class="va">bmx</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'seqn'</span>, <span class="st">'year'</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">year</span>, <span class="va">seqn</span>, <span class="va">ridageyr</span>, <span class="va">riagendr</span>, <span class="va">bpxsy1</span>, <span class="va">bmxbmi</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="working-with-survey-years">Working with Survey Years<a class="anchor" aria-label="anchor" href="#working-with-survey-years"></a>
</h3>
<p>Since the <code>year</code> column tracks survey cycles, you can filter and analyze by time period:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">nhanesdata</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">demo</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/read_nhanes.html">read_nhanes</a></span><span class="op">(</span><span class="st">'DEMO'</span><span class="op">)</span>  <span class="co"># Uppercase works too!</span></span>
<span></span>
<span><span class="co"># Filter to recent cycles only</span></span>
<span><span class="va">recent_data</span> <span class="op">&lt;-</span> <span class="va">demo</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">year</span> <span class="op">&gt;=</span> <span class="fl">2015</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Compare across time periods</span></span>
<span><span class="va">demo</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    period <span class="op">=</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span></span>
<span>      <span class="va">year</span> <span class="op">&lt;</span> <span class="fl">2010</span> <span class="op">~</span> <span class="st">'1999-2009'</span>,</span>
<span>      <span class="va">year</span> <span class="op">&lt;</span> <span class="fl">2020</span> <span class="op">~</span> <span class="st">'2010-2019'</span>,</span>
<span>      <span class="cn">TRUE</span> <span class="op">~</span> <span class="st">'2020+'</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">period</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>n_participants <span class="op">=</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="using-helper-functions">Using Helper Functions<a class="anchor" aria-label="anchor" href="#using-helper-functions"></a>
</h3>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">nhanesdata</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Find the CDC codebook for a dataset</span></span>
<span><span class="fu"><a href="reference/get_url.html">get_url</a></span><span class="op">(</span><span class="st">'DEMO_J'</span><span class="op">)</span>  <span class="co"># Get docs for 2017-2018 demographics</span></span>
<span></span>
<span><span class="co"># Search for variables by term</span></span>
<span><span class="fu"><a href="reference/term_search.html">term_search</a></span><span class="op">(</span><span class="st">'diabetes'</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Search by exact variable name</span></span>
<span><span class="fu"><a href="reference/var_search.html">var_search</a></span><span class="op">(</span><span class="st">'LBXTC'</span><span class="op">)</span>  <span class="co"># Total cholesterol</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="data-storage-format">Data Storage Format<a class="anchor" aria-label="anchor" href="#data-storage-format"></a>
</h2>
<p>The package uses <strong>parquet format</strong> for optimal performance and cross-platform compatibility:</p>
<ul>
<li>
<strong><code>.parquet</code></strong>: Cross-platform, fast I/O, columnar storage, works with Python/Julia/Arrow</li>
</ul>
<p>The <code><a href="reference/read_nhanes.html">read_nhanes()</a></code> function uses <code>.parquet</code> files for better performance and interoperability.</p>
</div>
<div class="section level2">
<h2 id="notes-on-nhanes-data-quality">Notes on NHANES Data Quality<a class="anchor" aria-label="anchor" href="#notes-on-nhanes-data-quality"></a>
</h2>
<div class="section level3">
<h3 id="survey-cycle-details">Survey Cycle Details<a class="anchor" aria-label="anchor" href="#survey-cycle-details"></a>
</h3>
<ul>
<li>
<strong>2-year cycles</strong>: Data released biannually (1999-2000, 2001-2002, etc.)<br>
</li>
<li>
<strong>2019-2020 cycle</strong>: Interrupted by COVID-19 pandemic and not released<br>
</li>
<li>
<strong>Suffix pattern</strong>: Letters B through L, skipping K (so J → L between 2017-2018 and 2021-2022)</li>
</ul>
</div>
<div class="section level3">
<h3 id="type-harmonization">Type Harmonization<a class="anchor" aria-label="anchor" href="#type-harmonization"></a>
</h3>
<p>Older cycles sometimes use different variable types (e.g., factor vs. character, integer vs. double). The <code>pull_nhanes()</code> function detects and resolves these conflicts automatically:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># This handles type mismatches transparently</span></span>
<span><span class="va">demo</span> <span class="op">&lt;-</span> <span class="fu">pull_nhanes</span><span class="op">(</span><span class="st">'demo'</span><span class="op">)</span></span>
<span><span class="co"># Type mismatch in riagendr: integer vs double... converting types now...</span></span>
<span><span class="co"># Type mismatch in ridreth1: factor vs character... converting types now...</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="special-cases">Special Cases<a class="anchor" aria-label="anchor" href="#special-cases"></a>
</h3>
<p><strong>DXX Tables (Body Composition)</strong>: The 2005-2006 cycle contains repeated measures that shouldn’t be merged blindly with other cycles. Read the CDC documentation carefully before using these datasets.</p>
</div>
</div>
<div class="section level2">
<h2 id="public-data-access">Public Data Access<a class="anchor" aria-label="anchor" href="#public-data-access"></a>
</h2>
<p>All pre-processed datasets are hosted publicly at:</p>
<pre><code>https://nhanes.kylegrealis.com/{dataset_name}.parquet</code></pre>
<p>You can access them directly without the package:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Direct download (without nhanesdata package)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/apache/arrow/" class="external-link">arrow</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">demo</span> <span class="op">&lt;-</span> <span class="fu">arrow</span><span class="fu">::</span><span class="fu"><a href="https://arrow.apache.org/docs/r/reference/read_parquet.html" class="external-link">read_parquet</a></span><span class="op">(</span><span class="st">'https://nhanes.kylegrealis.com/demo.parquet'</span><span class="op">)</span></span>
<span><span class="va">trigly</span> <span class="op">&lt;-</span> <span class="fu">arrow</span><span class="fu">::</span><span class="fu"><a href="https://arrow.apache.org/docs/r/reference/read_parquet.html" class="external-link">read_parquet</a></span><span class="op">(</span><span class="st">'https://nhanes.kylegrealis.com/trigly.parquet'</span><span class="op">)</span></span></code></pre></div>
<p><strong>Note:</strong> Dataset names in URLs are lowercase. The <code><a href="reference/read_nhanes.html">read_nhanes()</a></code> function handles case conversion automatically.</p>
<p>This direct access is useful for:<br>
- Sharing data with collaborators who don’t need the full package<br>
- Accessing data from Python, Julia, or other Arrow-compatible languages<br>
- Quick data exploration without installing dependencies</p>
</div>
<div class="section level2">
<h2 id="setup-for-package-maintainers">Setup for Package Maintainers<a class="anchor" aria-label="anchor" href="#setup-for-package-maintainers"></a>
</h2>
<div class="section level3">
<h3 id="cloudflare-r2-configuration">Cloudflare R2 Configuration<a class="anchor" aria-label="anchor" href="#cloudflare-r2-configuration"></a>
</h3>
<p>To push processed data to your own R2 bucket, configure these environment variables:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Set in .Renviron or configure via system environment</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.setenv</a></span><span class="op">(</span></span>
<span>  R2_ACCOUNT_ID <span class="op">=</span> <span class="st">"your_account_id"</span>,</span>
<span>  R2_ACCESS_KEY_ID <span class="op">=</span> <span class="st">"your_access_key"</span>,</span>
<span>  R2_SECRET_ACCESS_KEY <span class="op">=</span> <span class="st">"your_secret_key"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>See <code>SECURITY.md</code> for detailed setup instructions and security best practices.</p>
</div>
<div class="section level3">
<h3 id="github-actions-secrets">GitHub Actions Secrets<a class="anchor" aria-label="anchor" href="#github-actions-secrets"></a>
</h3>
<p>For automated workflows, add these secrets to your GitHub repository:</p>
<ol style="list-style-type: decimal">
<li>Go to <strong>Settings</strong> → <strong>Secrets and variables</strong> → <strong>Actions</strong>
</li>
<li>Add new repository secrets:
<ul>
<li>
<code>R2_ACCOUNT_ID</code><br>
</li>
<li>
<code>R2_ACCESS_KEY_ID</code><br>
</li>
<li><code>R2_SECRET_ACCESS_KEY</code></li>
</ul>
</li>
</ol>
<p>The workflow at <code>.github/workflows/update-nhanes-data.yml</code> will use these automatically.</p>
</div>
</div>
<div class="section level2">
<h2 id="getting-help">Getting Help<a class="anchor" aria-label="anchor" href="#getting-help"></a>
</h2>
<ul>
<li>
<strong>Bug reports &amp; feature requests</strong>: <a href="https://github.com/kyleGrealis/nhanesdata/issues" class="external-link">GitHub Issues</a><br>
</li>
<li>
<strong>Function documentation</strong>: <code>?function_name</code> (e.g., <code><a href="reference/read_nhanes.html">?read_nhanes</a></code>, <code><a href="reference/term_search.html">?term_search</a></code>)<br>
</li>
<li>
<strong>Package vignettes</strong>: <code>browseVignettes("nhanesdata")</code> for detailed guides<br>
</li>
<li>
<strong>CDC NHANES resources</strong>: <a href="https://www.cdc.gov/nchs/nhanes/" class="external-link">NHANES Website</a><br>
</li>
<li>
<strong>nhanesA package</strong>: For direct CDC API access, see <a href="https://cran.r-project.org/package=nhanesA" class="external-link">nhanesA on CRAN</a>
</li>
</ul>
</div>
<div class="section level2">
<h2 id="related-packages">Related Packages<a class="anchor" aria-label="anchor" href="#related-packages"></a>
</h2>
<ul>
<li>
<strong><a href="https://cran.r-project.org/package=nhanesA" class="external-link">nhanesA</a></strong>: Direct interface to NHANES API (this package wraps it for multi-cycle harmonization)<br>
</li>
<li>
<strong><a href="https://cran.r-project.org/package=survey" class="external-link">survey</a></strong>: Complex survey analysis with proper weighting<br>
</li>
<li>
<strong><a href="https://cran.r-project.org/package=srvyr" class="external-link">srvyr</a></strong>: Tidy survey analysis using dplyr syntax<br>
</li>
<li>
<strong><a href="https://cran.r-project.org/package=gtsummary" class="external-link">gtsummary</a></strong>: Publication-ready summary tables</li>
</ul>
</div>
<div class="section level2">
<h2 id="contributing">Contributing<a class="anchor" aria-label="anchor" href="#contributing"></a>
</h2>
<p>This is a personal data project, but feel free to fork it if you find it useful.</p>
</div>
<div class="section level2">
<h2 id="license">License<a class="anchor" aria-label="anchor" href="#license"></a>
</h2>
<p>NHANES data is public domain (U.S. government). This processing code is provided as-is.</p>
</div>
</div>
  </main><aside class="col-md-3"><div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing nhanesdata</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>
<a href="https://kylegrealis.com" class="external-link">Kyle Grealis</a> <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-9223-8854" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a>  </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/kyleGrealis/nhanesdata/actions/workflows/update-nhanes-data.yml" class="external-link"><img src="https://github.com/kyleGrealis/nhanesdata/actions/workflows/update-nhanes-data.yml/badge.svg" alt="Update NHANES Data"></a></li>
<li><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental" class="external-link"><img src="https://img.shields.io/badge/lifecycle-experimental-orange.svg" alt="Lifecycle: experimental"></a></li>
<li><a href="https://opensource.org/licenses/MIT" class="external-link"><img src="https://img.shields.io/badge/License-MIT-blue.svg" alt="License: MIT"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://kylegrealis.com" class="external-link">Kyle Grealis</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
